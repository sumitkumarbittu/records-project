<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Record Entry</title>

<style>
:root {
  --bg: #0f172a;
  --card: rgba(255,255,255,0.08);
  --border: rgba(255,255,255,0.15);
  --text: #e5e7eb;
  --muted: #9ca3af;
  --accent: #38bdf8;
  --success: #22c55e;
  --error: #ef4444;
}

* { box-sizing: border-box; font-family: system-ui, -apple-system, BlinkMacSystemFont; }

body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(1200px 600px at top, #1e293b, var(--bg));
  color: var(--text);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.container {
  width: 100%;
  max-width: 520px;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  backdrop-filter: blur(16px);
  border-radius: 20px;
  padding: 28px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.4);
}

h1 {
  margin: 0 0 8px;
  font-size: 1.8rem;
  text-align: center;
}

.subtitle {
  text-align: center;
  color: var(--muted);
  margin-bottom: 24px;
}

.field {
  margin-bottom: 16px;
}

label {
  display: block;
  margin-bottom: 6px;
  font-size: 0.9rem;
  color: var(--muted);
}

input {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(0,0,0,0.35);
  color: var(--text);
  font-size: 1rem;
  outline: none;
}

input:focus {
  border-color: var(--accent);
}

input[type="file"] {
  padding: 10px;
}

button {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: linear-gradient(135deg, #38bdf8, #0ea5e9);
  color: #02131f;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.15s ease, opacity 0.15s ease;
}

button:hover { transform: translateY(-1px); }
button:disabled { opacity: 0.6; cursor: not-allowed; }

.toast {
  margin-top: 16px;
  padding: 14px;
  border-radius: 12px;
  font-size: 0.95rem;
  display: none;
}

.toast.success {
  background: rgba(34,197,94,0.15);
  border: 1px solid rgba(34,197,94,0.4);
  color: var(--success);
}

.toast.error {
  background: rgba(239,68,68,0.15);
  border: 1px solid rgba(239,68,68,0.4);
  color: var(--error);
}

.footer {
  text-align: center;
  margin-top: 16px;
  font-size: 0.8rem;
  color: var(--muted);
}
</style>
</head>

<body>
<div class="container">
  <div class="card">
    <h1>üìã Save Record</h1>
    <div class="subtitle">Enter details & submit securely</div>

    <form id="recordForm">
      <div class="field">
        <label>Name *</label>
        <input type="text" name="name" maxlength="50" required />
      </div>

      <div class="field">
        <label>Roll Number *</label>
        <input type="number" name="roll" required />
      </div>

      <div class="field">
        <label>Phone *</label>
        <input type="tel" name="phone" maxlength="10" required />
      </div>

      <div class="field">
        <label>Amount *</label>
        <input type="number" name="amount" step="0.01" required />
      </div>

      <div class="field">
        <label>Photo (optional)</label>
        <input type="file" name="photo" accept="image/*" />
      </div>

      <button type="submit">Save Record</button>
    </form>

    <div id="toast" class="toast"></div>
  </div>

  <div class="footer">
    Secure Record System ¬∑ API Powered
  </div>
</div>

<script>
/* ==============================
   CONFIG
================================ */
const API_BASE = "https://records-project.onrender.com"; // ‚Üê CHANGE THIS

/* ==============================
   LOGIC
================================ */
const form = document.getElementById("recordForm");
const toast = document.getElementById("toast");
const button = form.querySelector("button");

function showToast(message, type) {
  toast.className = "toast " + type;
  toast.textContent = message;
  toast.style.display = "block";
}

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  toast.style.display = "none";

  const formData = new FormData(form);
  button.disabled = true;
  button.textContent = "Saving...";

  try {
    const res = await fetch(`${API_BASE}/api/save`, {
      method: "POST",
      body: formData
    });

    const data = await res.json();

    if (!res.ok) {
      throw data;
    }

    showToast(
      `‚úÖ Record saved successfully (ID: ${data.id})`,
      "success"
    );
    form.reset();

  } catch (err) {
    showToast(
      `‚ùå ${err.error || err.message || "Failed to save record"}`,
      "error"
    );
  } finally {
    button.disabled = false;
    button.textContent = "Save Record";
  }
});
</script>
</body>
</html>
